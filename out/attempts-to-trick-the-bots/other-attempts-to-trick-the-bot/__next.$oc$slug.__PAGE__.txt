1:"$Sreact.fragment"
2:I[477357,["/_next/static/chunks/d9100ec654d8a931.js","/_next/static/chunks/0e8abc0100cbb589.js","/_next/static/chunks/62a85ffc1c6cf141.js","/_next/static/chunks/ee9765690b3191dd.js","/_next/static/chunks/1017e6f575405ada.js","/_next/static/chunks/740e282a110611af.js"],"TOCProvider"]
3:I[5037,["/_next/static/chunks/d9100ec654d8a931.js","/_next/static/chunks/0e8abc0100cbb589.js","/_next/static/chunks/62a85ffc1c6cf141.js","/_next/static/chunks/ee9765690b3191dd.js","/_next/static/chunks/1017e6f575405ada.js","/_next/static/chunks/740e282a110611af.js"],"PageTOCPopover"]
4:I[5037,["/_next/static/chunks/d9100ec654d8a931.js","/_next/static/chunks/0e8abc0100cbb589.js","/_next/static/chunks/62a85ffc1c6cf141.js","/_next/static/chunks/ee9765690b3191dd.js","/_next/static/chunks/1017e6f575405ada.js","/_next/static/chunks/740e282a110611af.js"],"PageTOCPopoverTrigger"]
5:I[5037,["/_next/static/chunks/d9100ec654d8a931.js","/_next/static/chunks/0e8abc0100cbb589.js","/_next/static/chunks/62a85ffc1c6cf141.js","/_next/static/chunks/ee9765690b3191dd.js","/_next/static/chunks/1017e6f575405ada.js","/_next/static/chunks/740e282a110611af.js"],"PageTOCPopoverContent"]
6:I[477357,["/_next/static/chunks/d9100ec654d8a931.js","/_next/static/chunks/0e8abc0100cbb589.js","/_next/static/chunks/62a85ffc1c6cf141.js","/_next/static/chunks/ee9765690b3191dd.js","/_next/static/chunks/1017e6f575405ada.js","/_next/static/chunks/740e282a110611af.js"],"TOCScrollArea"]
7:I[477357,["/_next/static/chunks/d9100ec654d8a931.js","/_next/static/chunks/0e8abc0100cbb589.js","/_next/static/chunks/62a85ffc1c6cf141.js","/_next/static/chunks/ee9765690b3191dd.js","/_next/static/chunks/1017e6f575405ada.js","/_next/static/chunks/740e282a110611af.js"],"TOCItems"]
8:I[5037,["/_next/static/chunks/d9100ec654d8a931.js","/_next/static/chunks/0e8abc0100cbb589.js","/_next/static/chunks/62a85ffc1c6cf141.js","/_next/static/chunks/ee9765690b3191dd.js","/_next/static/chunks/1017e6f575405ada.js","/_next/static/chunks/740e282a110611af.js"],"PageBreadcrumb"]
9:I[847882,["/_next/static/chunks/d9100ec654d8a931.js","/_next/static/chunks/0e8abc0100cbb589.js","/_next/static/chunks/62a85ffc1c6cf141.js","/_next/static/chunks/ee9765690b3191dd.js","/_next/static/chunks/1017e6f575405ada.js","/_next/static/chunks/740e282a110611af.js"],"default"]
1b:I[5037,["/_next/static/chunks/d9100ec654d8a931.js","/_next/static/chunks/0e8abc0100cbb589.js","/_next/static/chunks/62a85ffc1c6cf141.js","/_next/static/chunks/ee9765690b3191dd.js","/_next/static/chunks/1017e6f575405ada.js","/_next/static/chunks/740e282a110611af.js"],"PageFooter"]
1c:I[5037,["/_next/static/chunks/d9100ec654d8a931.js","/_next/static/chunks/0e8abc0100cbb589.js","/_next/static/chunks/62a85ffc1c6cf141.js","/_next/static/chunks/ee9765690b3191dd.js","/_next/static/chunks/1017e6f575405ada.js","/_next/static/chunks/740e282a110611af.js"],"PageTOC"]
1d:I[944817,["/_next/static/chunks/d9100ec654d8a931.js","/_next/static/chunks/0e8abc0100cbb589.js","/_next/static/chunks/62a85ffc1c6cf141.js","/_next/static/chunks/ee9765690b3191dd.js","/_next/static/chunks/1017e6f575405ada.js","/_next/static/chunks/740e282a110611af.js"],"I18nLabel"]
1e:I[219652,["/_next/static/chunks/fa39bd5afb65b240.js","/_next/static/chunks/b498c38997bd364b.js"],"OutletBoundary"]
1f:"$Sreact.suspense"
:HL["/_next/static/chunks/2f46520a7df96dce.css","style"]
0:{"buildId":"uOk1hfvtigOhbuB8Ejt4q","rsc":["$","$1","c",{"children":[["$","$L2",null,{"toc":[{"depth":2,"url":"#background-","title":["Background ",["$","a",null,{"href":"#background","id":"background"}]]},{"depth":2,"url":"#simulation-vs-reality-","title":["Simulation vs Reality ",["$","a",null,{"href":"#simulation-vs-reality","id":"simulation-vs-reality"}]]},{"depth":2,"url":"#the-second-defense---payment-only-on-a-sell-transaction-","title":["The second defense - Payment only on a sell transaction ",["$","a",null,{"href":"#the-second-defense-payment-only-on-a-sell-transaction","id":"the-second-defense-payment-only-on-a-sell-transaction"}]]},{"depth":2,"url":"#from-victim-to-predator-","title":["From Victim to Predator ",["$","a",null,{"href":"#from-victim-to-predator","id":"from-victim-to-predator"}]]}],"children":["$","div",null,{"id":"nd-page","className":"flex flex-1 w-full mx-auto max-w-(--fd-page-width) pt-(--fd-tocnav-height) pe-(--fd-toc-width)","children":[["$","$L3",null,{"children":[["$","$L4",null,{}],["$","$L5",null,{"children":["$undefined",["$","$L6",null,{"children":["$","$L7",null,{}]}],"$undefined"]}]]}],["$","article",null,{"children":[["$","$L8",null,{}],[["$","h1",null,{"children":"Other attempts","className":"text-[1.75em] font-semibold"}],["$","p",null,{"children":"What are the other attempts to trick the bot?","className":"mb-8 text-lg text-fd-muted-foreground"}],["$","div",null,{"children":[["$","div",null,{"className":"flex gap-2 my-4 rounded-xl border bg-fd-card p-3 ps-1 text-sm text-fd-card-foreground shadow-md break-words","style":{"--callout-color":"var(--color-fd-info, var(--color-fd-muted))","wordBreak":"break-word","overflowWrap":"anywhere"},"children":[["$","div",null,{"role":"none","className":"w-0.5 bg-(--callout-color)/50 rounded-sm"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide size-5 -me-0.5 fill-(--callout-color) text-fd-card","children":[[["$","circle","1mglay",{"cx":"12","cy":"12","r":"10"}],["$","path","1dtifu",{"d":"M12 16v-4"}],["$","path","e9boi3",{"d":"M12 8h.01"}]],"$undefined"]}],["$","div",null,{"className":"flex flex-col gap-2 min-w-0 flex-1","children":["$undefined",["$","div",null,{"className":"text-fd-muted-foreground prose-no-margin empty:hidden","children":["$","p",null,{"children":[["$","strong",null,{"children":"Link:"}]," ",["$","$L9",null,{"href":"https://twitter.com/bertcmiller/status/1381296074086830091?s=20","children":"https://twitter.com/bertcmiller/status/1381296074086830091?s=20"}]]}]}]]}]]}],"\n",["$","h2",null,{"className":"flex scroll-m-28 flex-row items-center gap-2","id":"background-","children":[["$","a",null,{"data-card":"","href":"#background-","className":"peer","children":["Background ",["$","a",null,{"href":"#background","id":"background"}]]}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100","aria-label":"Link to section","children":[[["$","path","1cjeqo",{"d":"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}],["$","path","19qd67",{"d":"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"}]],"$undefined"]}]]}],"\n",["$","p",null,{"children":"Instead of users paying transaction fees via gas prices, Flashbots users pay fees via a smart contract call which transfers ETH to a miner. Miners receive bundles of transaction from users and include the bundle that pays them the most. Users love this because they only pay for transactions that are included and they can determine the fee that they are going to pay."}],"\n",["$","p",null,{"children":"Sandwich bots watch the mempool for users buying on DEXes and sandwich them: running the price up before the victim buys and dumping after for a profit. Those 3 txs (buy, victim transaction, sell) make up a bundle. Note the Sandwich sell transaction contains the smart contract payment to the miner. It's important that payment goes to the miner on the sell transaction! That should only happen after the bot has secured profit from selling the tokens bought in their front-run. If that sell fails then there is no payment to the miner, and thus their bundle shouldn't be included"}],"\n","$La","\n","$Lb","\n","$Lc","\n","$Ld","\n","$Le","\n","$Lf","\n","$L10","\n","$L11","\n","$L12","\n","$L13"],"className":"prose flex-1"}]],"$L14","$L15"],"className":"flex min-w-0 w-full flex-col gap-4 pt-8 px-4 md:px-6 md:mx-auto"}],"$L16"]}]}],["$L17","$L18","$L19"],"$L1a"]}],"loading":null,"isPartial":false}
a:["$","p",null,{"children":"To be even more secure, bots will simulate their transactions on local infrastructure. Bots won't send transactions unless the simulation goes well. Paying transaction fees only on the sell transaction of a sandwich should defend against this. No profit, no payment."}]
b:["$","h2",null,{"className":"flex scroll-m-28 flex-row items-center gap-2","id":"simulation-vs-reality-","children":[["$","a",null,{"data-card":"","href":"#simulation-vs-reality-","className":"peer","children":["Simulation vs Reality ",["$","a",null,{"href":"#simulation-vs-reality","id":"simulation-vs-reality"}]]}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100","aria-label":"Link to section","children":[[["$","path","1cjeqo",{"d":"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}],["$","path","19qd67",{"d":"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"}]],"$undefined"]}]]}]
c:["$","p",null,{"children":"Some really smart people found weaknesses among all of these defenses."}]
d:["$","p",null,{"children":"The first defense was that simulation was done with an ERC20 transfer function that checked to see if the block was a mined by Flashbots' miners, and if so it transfers way less out. Local simulations look fine but do not work in production."}]
e:["$","h2",null,{"className":"flex scroll-m-28 flex-row items-center gap-2","id":"the-second-defense---payment-only-on-a-sell-transaction-","children":[["$","a",null,{"data-card":"","href":"#the-second-defense---payment-only-on-a-sell-transaction-","className":"peer","children":["The second defense - Payment only on a sell transaction ",["$","a",null,{"href":"#the-second-defense-payment-only-on-a-sell-transaction","id":"the-second-defense-payment-only-on-a-sell-transaction"}]]}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100","aria-label":"Link to section","children":[[["$","path","1cjeqo",{"d":"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}],["$","path","19qd67",{"d":"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"}]],"$undefined"]}]]}]
f:["$","p",null,{"children":"Again: Sandwich bots make miner payment conditional on profit. That was broken by making the ERC20 token pay the miner. Thus even with the Sandwich bot sell failing, the miner would still get paid!"}]
10:["$","p",null,{"children":"Here's what actually happened: Sandwich bot gets baited and buys 100 ETH of the poisonous token. Poisonous token owner's bait triggers custom transfer function, which pays 0.1 ETH to the miner Sandwich bot's sell doesn't work because of the poisonous token. As the sandwich bot submitted these three transactions in a bundle all three were included: the successful buy, the bait, and the failed sell. The poisonous ERC20's payment via the custom transfer was what incentivized a miner to include it!"}]
11:["$","p",null,{"children":["It is estimated that the first person to do this made about 100 ETH. You can see the poisoned ERC20 Uniswap transactions ",["$","$L9",null,{"href":"https://etherscan.io/token/0xe253a1f7d5818022661bfbd2cbe043b642b4eff9?a=0x01f8d5a4862d51d2cf0cf52ac900a4d60adaeee6","children":"here "}],"."]}]
12:["$","h2",null,{"className":"flex scroll-m-28 flex-row items-center gap-2","id":"from-victim-to-predator-","children":[["$","a",null,{"data-card":"","href":"#from-victim-to-predator-","className":"peer","children":["From Victim to Predator ",["$","a",null,{"href":"#from-victim-to-predator","id":"from-victim-to-predator"}]]}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100","aria-label":"Link to section","children":[[["$","path","1cjeqo",{"d":"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}],["$","path","19qd67",{"d":"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"}]],"$undefined"]}]]}]
13:["$","p",null,{"children":"One of their victims was one the most successful Flashbots bot operators, and they immediately sprung into action. In a short period of time the victim turned into an apex predator. They launched a similar but slightly different ERC20 (YOLOchain), and ended up successfully baiting many more sandwichers. They made 300 ETH doing so!"}]
14:["$","div",null,{"className":"flex flex-row flex-wrap items-center justify-between gap-4 empty:hidden","children":["$undefined","$undefined"]}]
15:["$","$L1b",null,{}]
16:["$","$L1c",null,{"children":["$undefined",["$","h3",null,{"id":"toc-title","className":"inline-flex items-center gap-1.5 text-sm text-fd-muted-foreground","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide size-4","children":[[["$","path","olowqp",{"d":"M15 18H3"}],["$","path","16j9eg",{"d":"M17 6H3"}],["$","path","2avoz0",{"d":"M21 12H3"}]],"$undefined"]}],["$","$L1d",null,{"label":"toc"}]]}],["$","$L6",null,{"children":["$","$L7",null,{}]}],"$undefined"]}]
17:["$","link","0",{"rel":"stylesheet","href":"/_next/static/chunks/2f46520a7df96dce.css","precedence":"next"}]
18:["$","script","script-0",{"src":"/_next/static/chunks/1017e6f575405ada.js","async":true}]
19:["$","script","script-1",{"src":"/_next/static/chunks/740e282a110611af.js","async":true}]
1a:["$","$L1e",null,{"children":["$","$1f",null,{"name":"Next.MetadataOutlet","children":"$@20"}]}]
20:null
