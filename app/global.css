@import './fonts.css';
@import 'tailwindcss';
@import 'fumadocs-ui/css/solar.css';
@import 'fumadocs-ui/css/preset.css';

@theme {
  /* Orange highlight colors for light mode */
  --color-fd-primary: hsl(25, 95%, 53%);
  --color-fd-primary-foreground: hsl(0, 0%, 100%);
  --color-fd-accent: hsla(25, 95%, 53%, 0.15);
  --color-fd-accent-foreground: hsl(25, 95%, 40%);
  --color-fd-ring: hsl(25, 95%, 53%);

  /* Pure white background for content area */
  --color-fd-background: hsl(0, 0%, 100%);
  --color-fd-card: hsl(0, 0%, 100%);
}

/* Typography - Title (h1) and Subtitle (h2) */
h1,
article h1,
main h1 {
  font-family: 'Inter', 'Inter Fallback', system-ui, Arial, sans-serif !important;
  font-weight: 700 !important;
  font-size: 36px !important;
  line-height: 45px !important;
  color: rgb(28, 29, 31) !important;
}

h2,
article h2,
main h2,
.prose h2,
[data-content] h2 {
  font-family: 'Inter', 'Inter Fallback', system-ui, Arial, sans-serif !important;
  font-weight: 600 !important;
  font-size: 30px !important;
  line-height: 38px !important;
  color: rgb(28, 29, 31) !important;
}

/* Body text */
body,
article p,
article li,
article,
main {
  font-family: 'Inter', 'Inter Fallback', system-ui, Arial, sans-serif !important;
  font-style: normal !important;
  font-weight: 400 !important;
  font-size: 16px !important;
  line-height: 28px !important;
  color: rgb(28, 29, 31) !important;
}

.dark {
  /* Orange highlight colors for dark mode */
  --color-fd-primary: hsl(25, 95%, 58%);
  --color-fd-primary-foreground: hsl(0, 0%, 9%);
  --color-fd-accent: hsla(25, 95%, 53%, 0.2);
  --color-fd-accent-foreground: hsl(25, 95%, 70%);
  --color-fd-ring: hsl(25, 95%, 58%);
}

/* Dark mode typography - white text */
.dark h1,
.dark article h1,
.dark main h1 {
  color: rgb(255, 255, 255) !important;
}

.dark h2,
.dark article h2,
.dark main h2,
.dark .prose h2,
.dark [data-content] h2 {
  color: rgb(255, 255, 255) !important;
}

.dark body,
.dark article p,
.dark article li,
.dark article,
.dark main {
  color: rgb(255, 255, 255) !important;
}

@layer utilities {
  /* Pure white background for MDX content in light mode */
  :not(.dark) article,
  :not(.dark) main,
  :not(.dark) [data-content],
  :not(.dark) #nd-page {
    background-color: #ffffff !important;
  }

  /* Black background and white text for MDX content in dark mode */
  .dark article,
  .dark main,
  .dark [data-content],
  .dark #nd-page {
    background-color: #000000 !important;
    color: #ffffff !important;
  }

  /* Force tight line-height for all h2 headings - highest priority */
  article h2,
  h2,
  .prose h2,
  [data-content] h2,
  main h2 {
    line-height: 1.25 !important;
  }

  /* Specifically target headings with images */
  h2:has(img),
  article h2:has(img) {
    line-height: 1.25 !important;
  }

  /* Heading icon class for consistent sizing and alignment */
  .heading-icon {
    width: 32px;
    height: 32px;
    display: inline-block;
    vertical-align: middle;
  }

  /* Remove margins from inline images in headings */
  h1 img,
  h2 img,
  h3 img,
  h4 img,
  h5 img,
  h6 img,
  article h1 img,
  article h2 img,
  article h3 img {
    margin: 0 !important;
    margin-right: 0.25rem !important; /* Keep the small right margin */
  }

  /* Reduce margins for inline images in list items to 8px */
  li img,
  article li img,
  ol li img,
  ul li img {
    margin-top: 8px !important;
    margin-bottom: 8px !important;
    margin-left: 0 !important;
    margin-right: 0.25rem !important;
  }

  /* Add bottom margin to headings with images for spacing */
  h2:has(img),
  h1:has(img),
  h3:has(img),
  article h2:has(img),
  article h1:has(img),
  article h3:has(img) {
    margin-bottom: 1.5rem !important;
  }
}

/* Hide scrollbar for sidebar */
#nd-sidebar,
#nd-sidebar > *,
[data-sidebar],
aside[data-sidebar],
nav[data-sidebar] {
  scrollbar-width: none !important; /* Firefox */
  -ms-overflow-style: none !important; /* IE and Edge */
}

#nd-sidebar::-webkit-scrollbar,
#nd-sidebar > *::-webkit-scrollbar,
[data-sidebar]::-webkit-scrollbar,
aside[data-sidebar]::-webkit-scrollbar,
nav[data-sidebar]::-webkit-scrollbar {
  display: none !important; /* Chrome, Safari, Opera */
  width: 0 !important;
  height: 0 !important;
}

/* Hide breadcrumb navigation */
#nd-page article > div[class*="flex items-center gap-1.5 text-sm text-fd-muted-foreground"] {
  display: none;
}

/* ============================================
   Page Transition Animations
   ============================================ */

/* Keyframes for slide-in from right */
@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Keyframes for slide-in from bottom */
@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Keyframes for fade in */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Keyframes for text reveal */
@keyframes textReveal {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Keyframes for image reveal with scale */
@keyframes imageReveal {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Apply slide-in animation to main content */
main {
  animation: slideInRight 0.4s ease-out;
}

/* Apply animations to article/doc content */
article {
  animation: textReveal 0.5s ease-out;
  animation-fill-mode: both;
}

/* Animate headings with staggered delays */
/* Show title (h1) first with no delay */
article h1 {
  animation: textReveal 0.5s ease-out;
  animation-fill-mode: both;
}

/* Show h2 and h3 with content and images */
article h2 {
  animation: textReveal 0.5s ease-out 0.2s;
  animation-fill-mode: both;
}

article h3 {
  animation: textReveal 0.5s ease-out 0.2s;
  animation-fill-mode: both;
}

/* Show images together with content after title */
article img,
article picture,
article [data-rehype-pretty-code-figure] img {
  animation: textReveal 0.5s ease-out 0.2s;
  animation-fill-mode: both;
}

/* Show content blocks together with images after title */
article p,
article ul,
article ol,
article pre,
article blockquote {
  animation: textReveal 0.5s ease-out 0.2s;
  animation-fill-mode: both;
}

/* Code blocks animate with other content */
article pre {
  animation: textReveal 0.5s ease-out 0.2s;
  animation-fill-mode: both;
}

/* Smooth transitions for navigation changes */
@media (prefers-reduced-motion: no-preference) {
  html {
    scroll-behavior: smooth;
  }
}

/* Disable animations for users who prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Social icons: fixed to the upper-right */
.social-group {
  display: flex;
  gap: 10px;
}

.social-group a {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: #e5e5e5;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #666;
  transition: all 0.2s ease;
}

.social-group a:hover {
  background: #d4d4d4;
  color: #333;
}

.dark .social-group a {
  background: #1f1f1f;
  color: #bbb;
}

.dark .social-group a:hover {
  background: #2a2a2a;
  color: white;
}

#nd-toc .social-group-wrapper {
  margin-top: 1rem;
  display: flex;
  justify-content: flex-start;
  padding-left: 0;
  margin-left: 0;
}

#nd-toc .social-group-wrapper .social-group {
  position: sticky;
  top: calc(var(--fd-nav-height, 56px) + 48px);
  align-self: flex-start;
  margin-left: 0;
  padding-left: 0;
}

/* Hide images in the TOC (On this page section) */
#nd-toc img {
  display: none !important;
}

/* Figure and caption styling */
article figure {
  margin: 1.5rem 0;
  text-align: center;
}

/* Remove default paragraph margin inside figure (MDX wraps markdown in p tags) */
article figure p {
  margin: 0 !important;
}

/* Remove bottom margin from images inside figure */
article figure img {
  margin-bottom: 0 !important;
  display: block;
  margin-left: auto;
  margin-right: auto;
}

article figcaption {
  margin-top: 0.075rem !important;
  font-size: 0.75rem;
  color: #6b7280;
  font-style: italic;
  text-align: center;
}

.dark article figcaption {
  color: #9ca3af;
}

/* Reduce gap after any heading with inline images (icon headings) */
article h1:has(img),
article h2:has(img),
article h3:has(img),
article h4:has(img),
article h5:has(img),
article h6:has(img) {
  margin-bottom: -1.5rem !important;
  line-height: 1.25 !important; /* Reduce line spacing when heading text wraps */
  padding-top: 0 !important;
  padding-bottom: 0 !important;
  margin-top: 0 !important;
}

/* Ensure tight spacing in multi-line headings - more specific selectors */
#nd-page article h2:has(img),
#nd-page article h1:has(img),
#nd-page article h3:has(img),
main article h2:has(img),
main article h1:has(img),
main article h3:has(img) {
  line-height: 1.25 !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Target all h2 elements specifically (temporary debug rule) */
article h2 {
  line-height: 1.25 !important;
  /* border: 2px solid red !important; */ /* Uncomment to debug if CSS is loading */
}

/* Nuclear option - target by content structure */
h2:has(> img[alt=""]) {
  line-height: 1.25 !important;
  display: block !important;
}

/* Most specific possible selector */
article > h2:has(img) {
  line-height: 1.25 !important;
  margin-top: 0 !important;
  margin-bottom: 0 !important;
  padding-top: 0 !important;
  padding-bottom: 0 !important;
}

/* Removed: old rule was causing issues with list item images */
